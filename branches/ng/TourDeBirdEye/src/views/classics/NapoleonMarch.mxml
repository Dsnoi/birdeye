<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:coords="birdeye.vis.coords.*"
	xmlns:schema="birdeye.vis.elements.schema.*"
	xmlns:elements="birdeye.vis.elements.geometry.*"
	xmlns:trans="birdeye.vis.trans.projections.*"
	xmlns:scales="birdeye.vis.scales.*"
	xmlns:grid="birdeye.vis.guides.grid.*"
	xmlns:axis="birdeye.vis.guides.axis.*"
	xmlns:legend="birdeye.vis.guides.legend.*"
	xmlns:sources="birdeye.vis.source.csv.*"
	width="100%" height="100%" xmlns:data="birdeye.vis.data.*">
	
	<mx:Script>
		<![CDATA[
			private function colorFunction(dataValue:*, min:Number, max:Number, _size:Number):*
			{
				if (dataValue == "A")
					return 0xff0000;
				return 0x000000;
			}
		]]>
	</mx:Script>
	
	<mx:VBox width="100%" height="100%" horizontalAlign="center" verticalAlign="middle" >
    	<!-- Survivor and City Chart -->
    	<coords:Cartesian id="survChart" width="90%" height="90%">
			<coords:scales>
 				<scales:Linear id="size" scaleValues="{[3,30]}"/>
				<scales:Numeric id="col" f="colorFunction" />
			</coords:scales>
    		 <coords:elements>
    		 	<elements:PathElement dataProvider="{survivors.dataProvider}" extendMouseEvents="true"
    		 		scale1="{long}" scale2="{lat}" alphaStroke="0"
    		 		dim1="lonp" dim2="latp" styleName="grad1"
    		 		sizeScale="{size}" sizeField="survivors" 
    		 		colorScale="{col}" colorField="direction"
    		 		splitField="group"/>
    		 	<elements:PointElement dataProvider="{cities.dataProvider}"
    		 		scale1="{long}" scale2="{lat}" dim1="lonc" dim2="latc" 
    		 		graphicRendererSize="0" sizeLabel="14" colorFill="0xffffff" labelField="city" />
			 </coords:elements>
    	</coords:Cartesian>
    	<!-- Tempurature Chart -->
    	<legend:Legend direction="horizontal" width="100%" height="20" horizontalAlign="center">
    		<legend:LegendItem text="Advance" sizeRenderer="10" labelSize="14"
    			itemRenderer="birdeye.vis.guides.renderers.RectangleRenderer" fillColor="0xff0000"/>
    		<legend:LegendItem text="Retreat" sizeRenderer="10" labelSize="14"
    			itemRenderer="birdeye.vis.guides.renderers.RectangleRenderer" fillColor="0x000000"/>
    		<legend:LegendItem text="Temperature" sizeRenderer="10" labelSize="14"
    			itemRenderer="birdeye.vis.guides.renderers.LineRenderer" strokeWeight="5" strokeColor="0x0000ff"/>
    	</legend:Legend>
    	<coords:Cartesian id="tempChart" width="90%" height="30%">
    		<coords:scales>
 				<scales:Linear id="lat" dataValues="{[53.5,56]}" dataInterval="1"/>
 				<scales:Linear id="long" dataValues="{[22,40]}" dataInterval="2"/>
 				<scales:Linear id="temperature" dataValues="{[-40,5]}" dataInterval="10"/>
			</coords:scales>
			<coords:guides>
				<axis:Axis scale="{long}" placement="bottom"  colorPointer="0xFF0000" strokeColor="0xcccccc" labelColor="0xcccccc" weightPointer="3" sizeLabel="9" sizePointer="12" />
				<axis:Axis scale="{temperature}" placement="right" colorPointer="0xFF0000" strokeColor="0xcccccc" labelColor="0xcccccc" weightPointer="3" sizeLabel="9" sizePointer="12" />
			</coords:guides>
    		 <coords:elements>
    		 	<elements:LineElement dataProvider="{temperatures.dataProvider}" scale1="{long}" scale2="{temperature}" colorStroke="0x0000ff" weightStroke="10" dim1="lont" dim2="temp" labelField="date" />
			 </coords:elements>
    	</coords:Cartesian>
    </mx:VBox>

	<sources:CSVTXT id="csvTemp" fieldSeperator=";" url="views/classics/data/Minard-Temp.csv">
		<sources:dataProviders>
			<data:DataSet id="temperatures" fields="{['lont','temp','date']}"/>
		</sources:dataProviders>
	</sources:CSVTXT>
	<sources:CSVTXT id="csvCities" fieldSeperator=";" url="views/classics/data/Minard-City.csv">
		<sources:dataProviders>
			<data:DataSet id="cities" fields="{['lonc','latc','city']}"/>
		</sources:dataProviders>
	</sources:CSVTXT>
	<sources:CSVTXT id="csvSurv" fieldSeperator=";" url="views/classics/data/Minard-Survivors.csv">
		<sources:dataProviders>
			<data:DataSet id="survivors" fields="{['lonp','latp','survivors','direction','group']}"/>
		</sources:dataProviders>
	</sources:CSVTXT>
</mx:Canvas>
